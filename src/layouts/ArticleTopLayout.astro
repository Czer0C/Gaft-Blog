---
import type { CollectionEntry } from "astro:content"
import { formatDate, readingTime } from "@lib/utils"
import { Image } from "astro:assets"

type Props = {
  entry: CollectionEntry<"projects"> | CollectionEntry<"blog">
}

const { entry } = Astro.props
const { collection, data, body } = entry
const { title, summary, date, image } = data

const demoUrl = collection === "projects" ? data.demoUrl : null
const repoUrl = collection === "projects" ? data.repoUrl : null

---

<div>
  {
    image && 
    <Image src={image} width={1920} height={1080} alt={`${title} feature image`} />
  }

  <div class="w-full h-full mx-auto px-5 max-w-screen-md mt-4">
    <div class="flex flex-wrap text-sm uppercase mt-12 gap-3 opacity-75 ">
      <div class="flex items-center gap-2">
        <svg class="size-5 stroke-current">
          <use href="/ui.svg#calendar"/>
        </svg>
        {formatDate(date)}
      </div>
  
      <div class="flex items-center gap-2">
        <svg class="size-5 stroke-current">
          <use href="/ui.svg#book-open"/>
        </svg>
        {readingTime(body)}
      </div>
  
    </div>
  
    <h1 class="text-3xl font-semibold text-black dark:text-white mt-2">
      {title}
    </h1>
  
    <div class="mt-1">
      {summary}
    </div>
    
    {(demoUrl || repoUrl) && 
    <div class="mt-4 flex flex-wrap gap-2">
      {demoUrl && 
        <a href={demoUrl} target="_blank" class="group flex gap-2 items-center px-3 py-1.5 truncate rounded text-xs md:text-sm lg:text-base border border-black/25 dark:border-white/25 hover:bg-black/5 hover:dark:bg-white/15 blend">
          <svg class="size-4">
            <use href="/ui.svg#globe" class="fill-current group-hover:fill-black group-hover:dark:fill-white blend"/>
          </svg>
          <span class="text-current group-hover:text-black group-hover:dark:text-white blend">
            See Demo
          </span>
        </a>
      }
      {repoUrl && 
        <a href={repoUrl} target="_blank" class="group flex gap-2 items-center px-3 py-1.5 truncate rounded text-xs md:text-sm lg:text-base border border-black/25 dark:border-white/25 hover:bg-black/5 hover:dark:bg-white/15 blend">
          <svg class="size-4">
            <use href="/ui.svg#link" class="fill-current group-hover:fill-black group-hover:dark:fill-white blend"/>
          </svg>
          <span class="text-current group-hover:text-black group-hover:dark:text-white blend">
            See Repository
          </span>
        </a>
      }
    </div> 
    }
  </div>
</div>
